<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Jamf Prestage Tool</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@5.x.x" rel="stylesheet" type="text/css" />
  <link href="https://cdn.jsdelivr.net/npm/daisyui@5.x.x/themes.css" rel="stylesheet" type="text/css" />
  <script defer src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4.x.x"></script>
  <link rel="stylesheet" href="./styles.css">
</head>

<body data-theme="dim" class="transition-colors min-h-screen overflow-hidden" x-data="AlpineData">
  <!-- Title & toggle theme button -->
  <header class="navbar bg-base-200 shadow-md">
    <div class="navbar-start">
      <a class="btn btn-ghost text-2xl font-bold text-base-content">Jamf Prestage Tool</a>
    </div>
    <div class="navbar-center w-1/3">
      <div class="join w-full">
        <input @keydown.enter="searchButton" x-model="search" type="search" placeholder="Search..."
          class="join-item input w-full" />
        <button class="join-item btn bg-base-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </button>
      </div>
    </div>
    <div class="navbar-end">
      <select class="select" x-model="theme" @change="changeTheme($event.target.value)">
        <option selected disabled>Theme</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
        <option value="cupcake">Cupcake</option>
        <option value="bumblebee">Bumblebee</option>
        <option value="emerald">Emerald</option>
        <option value="corporate">Corporate</option>
        <option value="synthwave">Synthwave</option>
        <option value="retro">Retro</option>
        <option value="cyberpunk">Cyberpunk</option>
        <option value="valentine">Valentine</option>
        <option value="halloween">Halloween</option>
        <option value="garden">Garden</option>
        <option value="forest">Forest</option>
        <option value="aqua">Aqua</option>
        <option value="lofi">Lofi</option>
        <option value="pastel">Pastel</option>
        <option value="fantasy">Fantasy</option>
        <option value="wireframe">Wireframe</option>
        <option value="black">Black</option>
        <option value="luxury">Luxury</option>
        <option value="dracula">Dracula</option>
      </select>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex flex-col items-center justify-start bg-base-100 w-full mt-24">
    <section class="w-full max-w-2xl">

      <!-- JSON Data Box -->
      <fieldset class="fieldset bg-base-200 border-base-300 rounded-box border p-4 w-full rounded-box shadow">
        <legend class="fieldset-legend">Data</legend>

        <!-- JSON key/value fields -->
        <template x-for="(value, name) in currentData" :key="name">
          <span class="flex justify-between items-center w-full">
            <label x-text="name[0].toUpperCase() + name.slice(1)" class="label text-base"></label>
            <input type="text" class="input" @input="currentData[name] = $event.target.value" :value="value" />
          </span>
        </template>

        <!-- Show only if no data -->
        <template x-if="Object.keys(currentData).length === 0">
          <p class="text-base-content/50 text-center py-4 italic">No data loaded.</p>
        </template>

        <!-- Prestage Dropdown -->
        <section class="mt-4">
          <span class="flex justify-between items-center w-full">
            <label class="label text-base">Prestage</label>
            <select class="select" x-model="selectedPrestage" @change="onPrestageChange($event.target.value)">
              <option selected disabled>Prestage</option>
              <template x-for="prestage in prestages" :key="prestage.id">
                <option :value="prestage.id" x-text="prestage.name"></option>
              </template>
            </select>
          </span>
        </section>
      </fieldset>

      <!-- Pagination & Send -->
      <nav class="join mt-2 grid grid-cols-3 gap-1">
        <button @click="prev" class="join-item btn btn-soft">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          Previous
        </button>
        <button @click="send" class="join-item btn btn-soft btn-primary flex-1">
          Send
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7-7l7 7-7 7" />
          </svg>
        </button>
        <button @click="next" class="join-item btn btn-soft">
          Next
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </nav>
    </section>
  </main>
  <script defer type="module" src="main.js"></script>
</body>

</html>